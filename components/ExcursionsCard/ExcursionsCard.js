import Image from 'next/image';
import {useRouter} from 'next/router';
import {useEffect, useMemo, useState} from 'react';
import Calendar from 'react-calendar';
import {useSelector} from 'react-redux';
import Button from '../Button/Button';
import styles from './ExcursionsCard.module.scss';

const ExcursionCard = ({
	                       handleCalendarButtonClick,
	                       dateValue,
	                       setDateValue,
	                       isVisibleCalendar,
	                       setIsVisibleCalendar,
	                       cardCity,
	                       cardTitle,
	                       cardImage,
	                       cardDescription,
	                       cardDuration,
	                       cardJetty,
	                       cardInterval,
	                       cardRating,
	                       cardDiscountValue,
	                       cardTickets,
	                       small = false,
	                       limitedOpportunities = false,
	                       viewed = false,
	                       catalog = false,
                       }) => {
	const router = useRouter();
	const [languageFile, setLanguageFile] = useState();
	const [currentLocale, setCurrentLocale] = useState('ru');
	const citiesTranslates = useSelector((state) => state['geolocationSlice']['citiesTranslates']);
	
	useEffect(() => {
		if (router.locale) {
			import(`../../languages/${router.locale}.json`).then((language) => setLanguageFile(language.default));
		}
	}, [setLanguageFile, router.locale]);
	
	useEffect(() => {
		if (router.locale) {
			setCurrentLocale(router.locale);
		}
	}, [router.locale]);
	
	const ExcursionCardDepartures = useMemo(() => (
		<div className={styles.ExcursionsCard__departures}>
			<span>{languageFile?.['upcoming-excursions']?.['nearest-departures']}:</span>
			<div className={styles.ExcursionsCard__times}>
				<button>12:45</button>
				<button>14:25</button>
				<button>16:25</button>
				<button onClick={handleCalendarButtonClick}>
					<svg width="19" height="17" viewBox="0 0 19 17" fill="none" xmlns="http://www.w3.org/2000/svg">
						<path d="M15.8334 1.77783H16.9446C17.4968 1.77783 17.9446 2.22555 17.9446 2.77783V15.0001C17.9446 15.5523 17.4968 16.0001 16.9446 16.0001H2.05566C1.50338 16.0001 1.05566 15.5523 1.05566 15.0001V2.77783C1.05566 2.22555 1.50338 1.77783 2.05566 1.77783H3.16678M11.6112 1.77783H9.50011H7.389" stroke="#F0515D" strokeWidth="0.5"/>
						<rect x="4.61133" width="0.888889" height="3.55556" rx="0.444444" fill="#F0515D"/>
						<rect x="13.5" width="0.888889" height="3.55556" rx="0.444444" fill="#F0515D"/>
					</svg>
				</button>
			</div>
			<div
				className={`${styles.ExcursionsCard__calendar} ${isVisibleCalendar ? styles.ExcursionsCard__calendar_active : ''}`}
			>
				<Calendar
					locale={currentLocale}
					value={dateValue}
					onChange={setDateValue}
					onClickDay={() => setIsVisibleCalendar(false)}
				/>
			</div>
		</div>
	), [languageFile, handleCalendarButtonClick, currentLocale, dateValue, setDateValue, isVisibleCalendar, setIsVisibleCalendar]);
	
	const rating = useMemo(() => {
		const rating = [];
		
		for (let count = 0; count < 10; count++) {
			rating.push(Math.round(Number(cardRating) / 0.5) > count);
		}
		
		return (
			<div className={styles.ExcursionsCard__rating}>
				<svg width="61" height="12" viewBox="0 0 61 12" fill="none" xmlns="http://www.w3.org/2000/svg">
					<path d="M6.18188 0.883924C6.18188 0.724495 5.958 0.689037 5.90874 0.840662L4.7899 4.28409C4.74974 4.4077 4.63455 4.49139 4.50458 4.49139H0.92332C0.632703 4.49139 0.511871 4.86327 0.746985 5.03409L3.64429 7.13911C3.74943 7.2155 3.79343 7.35091 3.75327 7.47452L2.6466 10.8805C2.55679 11.1569 2.87314 11.3867 3.10825 11.2159L6.05822 9.07263C6.13591 9.01618 6.18188 8.92595 6.18188 8.82992V0.883924Z" fill={rating[0] ? '#f0515d' : '#e0deda'}/>
					<path d="M6 0.883924C6 0.724495 6.22388 0.689037 6.27315 0.840662L7.39199 4.28409C7.43215 4.4077 7.54734 4.49139 7.6773 4.49139H11.2586C11.5492 4.49139 11.67 4.86327 11.4349 5.03409L8.5376 7.13911C8.43245 7.2155 8.38846 7.35091 8.42862 7.47452L9.53529 10.8805C9.62509 11.1569 9.30875 11.3867 9.07364 11.2159L6.12366 9.07263C6.04597 9.01618 6 8.92595 6 8.82992V0.883924Z" fill={rating[1] ? '#f0515d' : '#e0deda'}/>
					<path d="M18.1819 0.883924C18.1819 0.724495 17.958 0.689037 17.9087 0.840662L16.7899 4.28409C16.7497 4.4077 16.6345 4.49139 16.5046 4.49139H12.9233C12.6327 4.49139 12.5119 4.86327 12.747 5.03409L15.6443 7.13911C15.7494 7.2155 15.7934 7.35091 15.7533 7.47452L14.6466 10.8805C14.5568 11.1569 14.8731 11.3867 15.1082 11.2159L18.0582 9.07263C18.1359 9.01618 18.1819 8.92595 18.1819 8.82992V0.883924Z" fill={rating[2] ? '#f0515d' : '#e0deda'}/>
					<path d="M18 0.883924C18 0.724495 18.2239 0.689037 18.2731 0.840662L19.392 4.28409C19.4321 4.4077 19.5473 4.49139 19.6773 4.49139H23.2586C23.5492 4.49139 23.67 4.86327 23.4349 5.03409L20.5376 7.13911C20.4325 7.2155 20.3885 7.35091 20.4286 7.47452L21.5353 10.8805C21.6251 11.1569 21.3087 11.3867 21.0736 11.2159L18.1237 9.07263C18.046 9.01618 18 8.92595 18 8.82992V0.883924Z" fill={rating[3] ? '#f0515d' : '#e0deda'}/>
					<path d="M30.1819 0.883924C30.1819 0.724495 29.958 0.689037 29.9087 0.840662L28.7899 4.28409C28.7497 4.4077 28.6345 4.49139 28.5046 4.49139H24.9233C24.6327 4.49139 24.5119 4.86327 24.747 5.03409L27.6443 7.13911C27.7494 7.2155 27.7934 7.35091 27.7533 7.47452L26.6466 10.8805C26.5568 11.1569 26.8731 11.3867 27.1082 11.2159L30.0582 9.07263C30.1359 9.01618 30.1819 8.92595 30.1819 8.82992V0.883924Z" fill={rating[4] ? '#f0515d' : '#e0deda'}/>
					<path d="M30 0.883924C30 0.724495 30.2239 0.689037 30.2731 0.840662L31.392 4.28409C31.4321 4.4077 31.5473 4.49139 31.6773 4.49139H35.2586C35.5492 4.49139 35.67 4.86327 35.4349 5.03409L32.5376 7.13911C32.4325 7.2155 32.3885 7.35091 32.4286 7.47452L33.5353 10.8805C33.6251 11.1569 33.3087 11.3867 33.0736 11.2159L30.1237 9.07263C30.046 9.01618 30 8.92595 30 8.82992V0.883924Z" fill={rating[5] ? '#f0515d' : '#e0deda'}/>
					<path d="M42.1819 0.883924C42.1819 0.724495 41.958 0.689037 41.9087 0.840662L40.7899 4.28409C40.7497 4.4077 40.6345 4.49139 40.5046 4.49139H36.9233C36.6327 4.49139 36.5119 4.86327 36.747 5.03409L39.6443 7.13911C39.7494 7.2155 39.7934 7.35091 39.7533 7.47452L38.6466 10.8805C38.5568 11.1569 38.8731 11.3867 39.1082 11.2159L42.0582 9.07263C42.1359 9.01618 42.1819 8.92595 42.1819 8.82992V0.883924Z" fill={rating[6] ? '#f0515d' : '#e0deda'}/>
					<path d="M42 0.883924C42 0.724495 42.2239 0.689037 42.2731 0.840662L43.392 4.28409C43.4321 4.4077 43.5473 4.49139 43.6773 4.49139H47.2586C47.5492 4.49139 47.67 4.86327 47.4349 5.03409L44.5376 7.13911C44.4325 7.2155 44.3885 7.35091 44.4286 7.47452L45.5353 10.8805C45.6251 11.1569 45.3087 11.3867 45.0736 11.2159L42.1237 9.07263C42.046 9.01618 42 8.92595 42 8.82992V0.883924Z" fill={rating[7] ? '#f0515d' : '#e0deda'}/>
					<path d="M54.1819 0.883924C54.1819 0.724495 53.958 0.689037 53.9087 0.840662L52.7899 4.28409C52.7497 4.4077 52.6345 4.49139 52.5046 4.49139H48.9233C48.6327 4.49139 48.5119 4.86327 48.747 5.03409L51.6443 7.13911C51.7494 7.2155 51.7934 7.35091 51.7533 7.47452L50.6466 10.8805C50.5568 11.1569 50.8731 11.3867 51.1082 11.2159L54.0582 9.07263C54.1359 9.01618 54.1819 8.92595 54.1819 8.82992V0.883924Z" fill={rating[8] ? '#f0515d' : '#e0deda'}/>
					<path d="M54 0.883924C54 0.724495 54.2239 0.689037 54.2731 0.840662L55.392 4.28409C55.4321 4.4077 55.5473 4.49139 55.6773 4.49139H59.2586C59.5492 4.49139 59.67 4.86327 59.4349 5.03409L56.5376 7.13911C56.4325 7.2155 56.3885 7.35091 56.4286 7.47452L57.5353 10.8805C57.6251 11.1569 57.3087 11.3867 57.0736 11.2159L54.1237 9.07263C54.046 9.01618 54 8.92595 54 8.82992V0.883924Z" fill={rating[9] ? '#f0515d' : '#e0deda'}/>
				</svg>
				{cardRating}
			</div>
		);
	}, []);
	
	const ExcursionCardDiscount = useMemo(() => {
		let minPrice = 0;
		let minPriceAmount = 0;
		
		cardTickets?.forEach((ticket, index) => {
			if (index === 0) {
				minPrice = ticket.price;
				minPriceAmount = ticket.amountPrice;
			} else {
				if (ticket.price < minPrice) minPrice = ticket.price;
				if (ticket.amountPrice < minPriceAmount) minPriceAmount = ticket.amountPrice;
			}
		});
		
		return (
			<div className={styles.ExcursionsCard__discount}>
				<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
					<path d="M15 8C15 4.13401 11.866 1 8 1C4.13401 1 1 4.13401 1 8C1 11.866 4.13401 15 8 15" stroke="#F0515D" strokeWidth="0.8" strokeLinecap="round" strokeLinejoin="round"/>
					<path d="M5.59766 8.71387C5.41536 8.71387 5.25911 8.7041 5.12891 8.68457C4.9987 8.66504 4.86686 8.63086 4.7334 8.58203C4.60319 8.52995 4.47624 8.45833 4.35254 8.36719C4.22884 8.27604 4.11979 8.15723 4.02539 8.01074C3.81706 7.68848 3.71289 7.26855 3.71289 6.75098C3.71289 5.7972 4.05957 5.17708 4.75293 4.89062C4.9873 4.79297 5.19889 4.74414 5.3877 4.74414C5.5765 4.74414 5.736 4.75391 5.86621 4.77344C5.99967 4.78971 6.13151 4.82389 6.26172 4.87598C6.39518 4.9248 6.52376 4.99479 6.64746 5.08594C6.77116 5.17708 6.88184 5.29753 6.97949 5.44727C7.18783 5.76953 7.29199 6.2041 7.29199 6.75098C7.29199 7.65592 6.94368 8.25651 6.24707 8.55273C5.99967 8.66016 5.7832 8.71387 5.59766 8.71387ZM6.32031 6.75098C6.32031 5.84928 6.04688 5.39844 5.5 5.39844C4.95638 5.39844 4.68457 5.84928 4.68457 6.75098C4.68457 7.42155 4.84733 7.83659 5.17285 7.99609C5.27376 8.04492 5.38281 8.06934 5.5 8.06934C5.62044 8.06934 5.72949 8.04492 5.82715 7.99609C5.92806 7.94727 6.01595 7.86914 6.09082 7.76172C6.24382 7.54036 6.32031 7.20345 6.32031 6.75098ZM8.78613 10.9307C8.73079 10.7256 8.70312 10.4831 8.70312 10.2031C8.70312 9.91992 8.73242 9.67415 8.79102 9.46582C8.84961 9.25749 8.92773 9.08008 9.02539 8.93359C9.12305 8.78385 9.23372 8.66178 9.35742 8.56738C9.48438 8.46973 9.61296 8.39323 9.74316 8.33789C9.97754 8.24023 10.1891 8.19141 10.3779 8.19141C10.57 8.19141 10.7311 8.20117 10.8613 8.2207C10.9948 8.23698 11.1266 8.27116 11.2568 8.32324C11.3903 8.37207 11.5173 8.44206 11.6377 8.5332C11.7614 8.62435 11.8721 8.74479 11.9697 8.89453C12.1781 9.22331 12.2822 9.65788 12.2822 10.1982C12.2822 11.1064 11.9355 11.707 11.2422 12C10.9948 12.1074 10.7409 12.1611 10.4805 12.1611C9.57878 12.1611 9.014 11.751 8.78613 10.9307ZM11.3154 10.1982C11.3154 9.29655 11.042 8.8457 10.4951 8.8457C9.94824 8.8457 9.6748 9.29655 9.6748 10.1982C9.6748 10.8688 9.83919 11.2839 10.168 11.4434C10.2689 11.4922 10.3779 11.5166 10.4951 11.5166C10.6156 11.5166 10.7246 11.4922 10.8223 11.4434C10.9232 11.3945 11.0094 11.3164 11.0811 11.209C11.2373 10.9876 11.3154 10.6507 11.3154 10.1982ZM9.75781 4.92969C9.91406 4.91341 10.0508 4.94922 10.168 5.03711C10.3861 5.19987 10.4593 5.33659 10.3877 5.44727L6.16895 11.9854C5.99316 11.9788 5.85156 11.9333 5.74414 11.8486C5.54232 11.6989 5.47233 11.5719 5.53418 11.4678L9.75781 4.92969Z" fill="#F0515D"/>
				</svg>
				<strong>От {minPriceAmount} ₽</strong>
				<span>{minPrice} ₽</span>
				{(small || viewed) && rating}
			</div>
		);
	}, [small]);
	
	const tariffsListMobile = cardTickets?.map((ticket, index) => (
		<div className={styles.ExcursionsCard__tariff} key={index}>
			<span>{languageFile?.['upcoming-excursions']?.['adult-ticket']}</span>
			<div>
				<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
					<path d="M15 8C15 4.13401 11.866 1 8 1C4.13401 1 1 4.13401 1 8C1 11.866 4.13401 15 8 15" stroke="#F0515D" strokeWidth="0.8" strokeLinecap="round" strokeLinejoin="round"/>
					<path d="M5.59766 8.71387C5.41536 8.71387 5.25911 8.7041 5.12891 8.68457C4.9987 8.66504 4.86686 8.63086 4.7334 8.58203C4.60319 8.52995 4.47624 8.45833 4.35254 8.36719C4.22884 8.27604 4.11979 8.15723 4.02539 8.01074C3.81706 7.68848 3.71289 7.26855 3.71289 6.75098C3.71289 5.7972 4.05957 5.17708 4.75293 4.89062C4.9873 4.79297 5.19889 4.74414 5.3877 4.74414C5.5765 4.74414 5.736 4.75391 5.86621 4.77344C5.99967 4.78971 6.13151 4.82389 6.26172 4.87598C6.39518 4.9248 6.52376 4.99479 6.64746 5.08594C6.77116 5.17708 6.88184 5.29753 6.97949 5.44727C7.18783 5.76953 7.29199 6.2041 7.29199 6.75098C7.29199 7.65592 6.94368 8.25651 6.24707 8.55273C5.99967 8.66016 5.7832 8.71387 5.59766 8.71387ZM6.32031 6.75098C6.32031 5.84928 6.04688 5.39844 5.5 5.39844C4.95638 5.39844 4.68457 5.84928 4.68457 6.75098C4.68457 7.42155 4.84733 7.83659 5.17285 7.99609C5.27376 8.04492 5.38281 8.06934 5.5 8.06934C5.62044 8.06934 5.72949 8.04492 5.82715 7.99609C5.92806 7.94727 6.01595 7.86914 6.09082 7.76172C6.24382 7.54036 6.32031 7.20345 6.32031 6.75098ZM8.78613 10.9307C8.73079 10.7256 8.70312 10.4831 8.70312 10.2031C8.70312 9.91992 8.73242 9.67415 8.79102 9.46582C8.84961 9.25749 8.92773 9.08008 9.02539 8.93359C9.12305 8.78385 9.23372 8.66178 9.35742 8.56738C9.48438 8.46973 9.61296 8.39323 9.74316 8.33789C9.97754 8.24023 10.1891 8.19141 10.3779 8.19141C10.57 8.19141 10.7311 8.20117 10.8613 8.2207C10.9948 8.23698 11.1266 8.27116 11.2568 8.32324C11.3903 8.37207 11.5173 8.44206 11.6377 8.5332C11.7614 8.62435 11.8721 8.74479 11.9697 8.89453C12.1781 9.22331 12.2822 9.65788 12.2822 10.1982C12.2822 11.1064 11.9355 11.707 11.2422 12C10.9948 12.1074 10.7409 12.1611 10.4805 12.1611C9.57878 12.1611 9.014 11.751 8.78613 10.9307ZM11.3154 10.1982C11.3154 9.29655 11.042 8.8457 10.4951 8.8457C9.94824 8.8457 9.6748 9.29655 9.6748 10.1982C9.6748 10.8688 9.83919 11.2839 10.168 11.4434C10.2689 11.4922 10.3779 11.5166 10.4951 11.5166C10.6156 11.5166 10.7246 11.4922 10.8223 11.4434C10.9232 11.3945 11.0094 11.3164 11.0811 11.209C11.2373 10.9876 11.3154 10.6507 11.3154 10.1982ZM9.75781 4.92969C9.91406 4.91341 10.0508 4.94922 10.168 5.03711C10.3861 5.19987 10.4593 5.33659 10.3877 5.44727L6.16895 11.9854C5.99316 11.9788 5.85156 11.9333 5.74414 11.8486C5.54232 11.6989 5.47233 11.5719 5.53418 11.4678L9.75781 4.92969Z" fill="#F0515D"/>
				</svg>
				<strong>{ticket.amountPrice} ₽</strong>
				<span>{ticket.price} ₽</span>
			</div>
		</div>
	));
	
	const tariffsListDesktop = cardTickets?.map((ticket, index) => (
		<div className={styles.ExcursionsCard__tariff} key={index}>
			<span>{ticket.title}</span>
			<div>
				<strong>{ticket.amountPrice} ₽</strong>
				<span>{ticket.price} ₽</span>
				<button>
					<svg width="17" height="16" viewBox="0 0 17 16" fill="none" xmlns="http://www.w3.org/2000/svg">
						<path d="M6.33335 15C6.70154 15 7.00002 14.7015 7.00002 14.3334C7.00002 13.9652 6.70154 13.6667 6.33335 13.6667C5.96516 13.6667 5.66669 13.9652 5.66669 14.3334C5.66669 14.7015 5.96516 15 6.33335 15Z" stroke="#F0515D" strokeLinecap="round" strokeLinejoin="round"/>
						<path d="M13.6667 15C14.0349 15 14.3333 14.7015 14.3333 14.3334C14.3333 13.9652 14.0349 13.6667 13.6667 13.6667C13.2985 13.6667 13 13.9652 13 14.3334C13 14.7015 13.2985 15 13.6667 15Z" stroke="#F0515D" strokeLinecap="round" strokeLinejoin="round"/>
						<path d="M1 1H3.66667L5.45333 9.92667C5.5143 10.2336 5.68127 10.5093 5.92503 10.7055C6.16879 10.9018 6.4738 11.006 6.78667 11H13.2667C13.5795 11.006 13.8845 10.9018 14.1283 10.7055C14.3721 10.5093 14.539 10.2336 14.6 9.92667L15.6667 4.33333H4.33333" stroke="#F0515D" strokeLinecap="round" strokeLinejoin="round"/>
					</svg>
				</button>
			</div>
		</div>
	));
	
	return (
		<div
			className={`
			${styles.ExcursionsCard}
			${small ? styles.ExcursionsCard_small : ''}
			${limitedOpportunities ? styles.ExcursionsCard_invalid : ''}
			${viewed ? styles.ExcursionsCard_viewed : ''}
			${catalog ? styles.ExcursionsCard_catalog : ''}
			`}
		>
			<div className={styles.ExcursionsCard__image}>
				{cardImage && (
					<Image
						src={cardImage}
						width={300}
						height={200}
						layout="responsive"
						objectFit="cover"
						alt=""
					/>
				)}
				{(small || viewed) && <i>-{cardDiscountValue}%</i>}
				{limitedOpportunities && (
					<b>
						<svg width="10" height="13" viewBox="0 0 10 13" fill="none" xmlns="http://www.w3.org/2000/svg">
							<path d="M4.99998 2.79165C5.23072 2.79165 5.45629 2.72322 5.64814 2.59503C5.84 2.46683 5.98953 2.28462 6.07784 2.07144C6.16614 1.85826 6.18924 1.62369 6.14423 1.39737C6.09921 1.17106 5.9881 0.963183 5.82494 0.800022C5.66177 0.636861 5.45389 0.525747 5.22758 0.480731C5.00127 0.435715 4.76669 0.458818 4.55351 0.547121C4.34033 0.635423 4.15812 0.784958 4.02993 0.976815C3.90173 1.16867 3.83331 1.39424 3.83331 1.62498C3.83331 1.9344 3.95623 2.23115 4.17502 2.44994C4.39381 2.66873 4.69056 2.79165 4.99998 2.79165ZM9.37498 10.9583H8.79164V8.04165C8.79164 7.88694 8.73019 7.73856 8.62079 7.62917C8.51139 7.51977 8.36302 7.45831 8.20831 7.45831H5.29164V6.29165H8.20831C8.36302 6.29165 8.51139 6.23019 8.62079 6.12079C8.73019 6.0114 8.79164 5.86302 8.79164 5.70831C8.79164 5.5536 8.73019 5.40523 8.62079 5.29584C8.51139 5.18644 8.36302 5.12498 8.20831 5.12498H5.29164V3.95831C5.29164 3.8036 5.23019 3.65523 5.12079 3.54584C5.01139 3.43644 4.86302 3.37498 4.70831 3.37498C4.5536 3.37498 4.40523 3.43644 4.29583 3.54584C4.18644 3.65523 4.12498 3.8036 4.12498 3.95831V8.04165C4.12498 8.19636 4.18644 8.34473 4.29583 8.45413C4.40523 8.56352 4.5536 8.62498 4.70831 8.62498H7.62498V11.5416C7.62498 11.6964 7.68643 11.8447 7.79583 11.9541C7.90523 12.0635 8.0536 12.125 8.20831 12.125H9.37498C9.52969 12.125 9.67806 12.0635 9.78746 11.9541C9.89685 11.8447 9.95831 11.6964 9.95831 11.5416C9.95831 11.3869 9.89685 11.2386 9.78746 11.1292C9.67806 11.0198 9.52969 10.9583 9.37498 10.9583ZM5.40831 10.025C5.11448 10.4168 4.70482 10.7062 4.23737 10.8522C3.76992 10.9982 3.26837 10.9934 2.80378 10.8386C2.33918 10.6837 1.93509 10.3866 1.64875 9.9893C1.3624 9.59202 1.20831 9.11471 1.20831 8.62498C1.209 8.17157 1.34177 7.72818 1.5904 7.34902C1.83904 6.96985 2.19275 6.67134 2.60831 6.48998C2.75064 6.4281 2.86256 6.31221 2.91945 6.1678C2.97634 6.0234 2.97353 5.86231 2.91164 5.71998C2.84976 5.57765 2.73387 5.46573 2.58947 5.40884C2.44506 5.35196 2.28398 5.35476 2.14164 5.41665C1.65077 5.63099 1.21564 5.95514 0.869763 6.36413C0.523888 6.77312 0.276497 7.25604 0.146644 7.77569C0.0167915 8.29534 0.00794096 8.83787 0.120774 9.36148C0.233608 9.8851 0.465114 10.3758 0.797464 10.7959C1.12981 11.2159 1.55414 11.5541 2.03776 11.7843C2.52139 12.0146 3.0514 12.1308 3.58699 12.1239C4.12258 12.1171 4.64945 11.9874 5.12703 11.7448C5.6046 11.5023 6.02014 11.1534 6.34164 10.725C6.43447 10.6012 6.47433 10.4456 6.45245 10.2925C6.43057 10.1393 6.34875 10.0011 6.22498 9.90831C6.10121 9.81549 5.94564 9.77563 5.79248 9.79751C5.63933 9.81939 5.50114 9.90121 5.40831 10.025Z" fill="white"/>
						</svg>
						<span>Для людей с огр. возможностями</span>
					</b>
				)}
			</div>
			<header className={styles.ExcursionsCard__header}>
				{viewed && <b>Neva Travel</b>}
				{small && <i>{citiesTranslates[cardCity]}</i>}
				<h3>{cardTitle}</h3>
				{small && <p>{cardDescription}</p>}
				<span>
					<svg width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg">
						<g opacity="0.6">
							<path d="M7.00008 12.8333C10.2217 12.8333 12.8334 10.2216 12.8334 6.99996C12.8334 3.7783 10.2217 1.16663 7.00008 1.16663C3.77842 1.16663 1.16675 3.7783 1.16675 6.99996C1.16675 10.2216 3.77842 12.8333 7.00008 12.8333Z" stroke="#212121" strokeWidth="0.8" strokeLinecap="round" strokeLinejoin="round"/>
							<path d="M7 3.5V7L9.33333 8.16667" stroke="#212121" strokeWidth="0.8" strokeLinecap="round" strokeLinejoin="round"/>
						</g>
					</svg>
					{cardDuration > 60 ? `${Math.floor(cardDuration / 60)}ч. ${cardDuration % 60} мин.` : `${cardDuration} мин.`}
				</span>
				<span>
					<svg width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg">
						<g opacity="0.6">
							<path d="M7.00008 12.8333C10.2217 12.8333 12.8334 10.2216 12.8334 6.99996C12.8334 3.7783 10.2217 1.16663 7.00008 1.16663C3.77842 1.16663 1.16675 3.7783 1.16675 6.99996C1.16675 10.2216 3.77842 12.8333 7.00008 12.8333Z" stroke="#212121" strokeWidth="0.8" strokeLinecap="round" strokeLinejoin="round"/>
							<path d="M12.8333 7H10.5" stroke="#212121" strokeWidth="0.8" strokeLinecap="round" strokeLinejoin="round"/>
							<path d="M3.50008 7H1.16675" stroke="#212121" strokeWidth="0.8" strokeLinecap="round" strokeLinejoin="round"/>
							<path d="M7 3.49996V1.16663" stroke="#212121" strokeWidth="0.8" strokeLinecap="round" strokeLinejoin="round"/>
							<path d="M7 12.8333V10.5" stroke="#212121" strokeWidth="0.8" strokeLinecap="round" strokeLinejoin="round"/>
						</g>
					</svg>
					{cardJetty}
				</span>
				<span>
					<svg width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg">
						<path opacity="0.6" d="M7.00008 12.6667C10.2217 12.6667 12.8334 10.055 12.8334 6.83333C12.8334 3.61167 10.2217 1 7.00008 1C3.77842 1 1.16675 3.61167 1.16675 6.83333C1.16675 10.055 3.77842 12.6667 7.00008 12.6667Z" stroke="#212121" strokeWidth="0.8" strokeLinecap="round" strokeLinejoin="round"/>
							<g opacity="0.6">
								<path d="M8 9L10 7L8 5" stroke="#212121" strokeWidth="0.8" strokeLinecap="round" strokeLinejoin="round"/>
								<path d="M5 9L7 7L5 5" stroke="#212121" strokeWidth="0.8" strokeLinecap="round" strokeLinejoin="round"/>
							</g>
						</svg>
						Каждые {cardInterval > 60 ? `${Math.floor(cardInterval / 60)}ч. ${cardInterval % 60} мин.` : `${cardInterval} мин.`}
				</span>
				{limitedOpportunities && (
					<span>
						<svg width="10" height="13" viewBox="0 0 10 13" fill="none" xmlns="http://www.w3.org/2000/svg">
							<path d="M4.99998 2.79165C5.23072 2.79165 5.45629 2.72322 5.64814 2.59503C5.84 2.46683 5.98953 2.28462 6.07784 2.07144C6.16614 1.85826 6.18924 1.62369 6.14423 1.39737C6.09921 1.17106 5.9881 0.963183 5.82494 0.800022C5.66177 0.636861 5.45389 0.525747 5.22758 0.480731C5.00127 0.435715 4.76669 0.458818 4.55351 0.547121C4.34033 0.635423 4.15812 0.784958 4.02993 0.976815C3.90173 1.16867 3.83331 1.39424 3.83331 1.62498C3.83331 1.9344 3.95623 2.23115 4.17502 2.44994C4.39381 2.66873 4.69056 2.79165 4.99998 2.79165ZM9.37498 10.9583H8.79164V8.04165C8.79164 7.88694 8.73019 7.73856 8.62079 7.62917C8.51139 7.51977 8.36302 7.45831 8.20831 7.45831H5.29164V6.29165H8.20831C8.36302 6.29165 8.51139 6.23019 8.62079 6.12079C8.73019 6.0114 8.79164 5.86302 8.79164 5.70831C8.79164 5.5536 8.73019 5.40523 8.62079 5.29584C8.51139 5.18644 8.36302 5.12498 8.20831 5.12498H5.29164V3.95831C5.29164 3.8036 5.23019 3.65523 5.12079 3.54584C5.01139 3.43644 4.86302 3.37498 4.70831 3.37498C4.5536 3.37498 4.40523 3.43644 4.29583 3.54584C4.18644 3.65523 4.12498 3.8036 4.12498 3.95831V8.04165C4.12498 8.19636 4.18644 8.34473 4.29583 8.45413C4.40523 8.56352 4.5536 8.62498 4.70831 8.62498H7.62498V11.5416C7.62498 11.6964 7.68643 11.8447 7.79583 11.9541C7.90523 12.0635 8.0536 12.125 8.20831 12.125H9.37498C9.52969 12.125 9.67806 12.0635 9.78746 11.9541C9.89685 11.8447 9.95831 11.6964 9.95831 11.5416C9.95831 11.3869 9.89685 11.2386 9.78746 11.1292C9.67806 11.0198 9.52969 10.9583 9.37498 10.9583ZM5.40831 10.025C5.11448 10.4168 4.70482 10.7062 4.23737 10.8522C3.76992 10.9982 3.26837 10.9934 2.80378 10.8386C2.33918 10.6837 1.93509 10.3866 1.64875 9.9893C1.3624 9.59202 1.20831 9.11471 1.20831 8.62498C1.209 8.17157 1.34177 7.72818 1.5904 7.34902C1.83904 6.96985 2.19275 6.67134 2.60831 6.48998C2.75064 6.4281 2.86256 6.31221 2.91945 6.1678C2.97634 6.0234 2.97353 5.86231 2.91164 5.71998C2.84976 5.57765 2.73387 5.46573 2.58947 5.40884C2.44506 5.35196 2.28398 5.35476 2.14164 5.41665C1.65077 5.63099 1.21564 5.95514 0.869763 6.36413C0.523888 6.77312 0.276497 7.25604 0.146644 7.77569C0.0167915 8.29534 0.00794096 8.83787 0.120774 9.36148C0.233608 9.8851 0.465114 10.3758 0.797464 10.7959C1.12981 11.2159 1.55414 11.5541 2.03776 11.7843C2.52139 12.0146 3.0514 12.1308 3.58699 12.1239C4.12258 12.1171 4.64945 11.9874 5.12703 11.7448C5.6046 11.5023 6.02014 11.1534 6.34164 10.725C6.43447 10.6012 6.47433 10.4456 6.45245 10.2925C6.43057 10.1393 6.34875 10.0011 6.22498 9.90831C6.10121 9.81549 5.94564 9.77563 5.79248 9.79751C5.63933 9.81939 5.50114 9.90121 5.40831 10.025Z" fill="#F0515D"/>
						</svg>
						Для людей с огр. возможностями
					</span>
				)}
				{limitedOpportunities && ExcursionCardDepartures}
				{limitedOpportunities && ExcursionCardDiscount}
				<div className={styles.ExcursionsCard__tariffs}>
					{cardTickets?.length && tariffsListMobile}
				</div>
			</header>
			{ExcursionCardDepartures}
			{ExcursionCardDiscount}
			<div className={styles.ExcursionsCard__tariffs}>
				{cardTickets?.length && tariffsListDesktop}
			</div>
			<footer className={styles.ExcursionsCard__footer}>
				<Button.Primary
					small={true}
					style={{paddingLeft: '1.3rem', paddingRight: '1.3rem'}}
				>
					{languageFile?.['upcoming-excursions']?.['buy-button']}
				</Button.Primary>
				<Button.Outlined
					small={true}
					style={{paddingLeft: '1.3rem', paddingRight: '1.3rem'}}
				>
					{languageFile?.['upcoming-excursions']?.['more-button']}
				</Button.Outlined>
				<Button.Outlined
					small={true}
					style={{paddingLeft: '0.5rem', paddingRight: '0.5rem'}}
				>
					<svg width="19" height="18" viewBox="0 0 19 18" fill="none" xmlns="http://www.w3.org/2000/svg">
						<path d="M16.6891 2.82611C16.2738 2.40569 15.7806 2.07219 15.2377 1.84465C14.6949 1.61711 14.1131 1.5 13.5255 1.5C12.9379 1.5 12.3561 1.61711 11.8133 1.84465C11.2704 2.07219 10.7772 2.40569 10.3619 2.82611L9.49978 3.69821L8.63771 2.82611C7.79866 1.9773 6.66066 1.50044 5.47407 1.50044C4.28747 1.50044 3.14947 1.9773 2.31042 2.82611C1.47137 3.67492 1 4.82616 1 6.02656C1 7.22696 1.47137 8.37819 2.31042 9.227L3.1725 10.0991L9.49978 16.5L15.8271 10.0991L16.6891 9.227C17.1047 8.80679 17.4344 8.30785 17.6593 7.75871C17.8842 7.20957 18 6.62097 18 6.02656C18 5.43214 17.8842 4.84355 17.6593 4.2944C17.4344 3.74526 17.1047 3.24633 16.6891 2.82611V2.82611Z" stroke="#F0515D" strokeWidth="1.2" strokeLinecap="round" strokeLinejoin="round"/>
					</svg>
				</Button.Outlined>
			</footer>
			{viewed && (
				<div className={styles.ExcursionsCard__more}>
					<em>Нева Тревел</em> предлагает еще 3 варианта цен на этот продукт
				</div>
			)}
		</div>
	);
};

export default ExcursionCard;
